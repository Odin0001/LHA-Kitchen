import{j as e,L as p,u as D,r as i,g as f,d as u,b as L,Q as m,_ as M,R as H,x as P,c as S,e as E,y as Z}from"./index-56e58669.js";import{g as F,u as G}from"./index-e3d5d3f4-e6ed04b4.js";import{G as y}from"./iconBase-4240f7eb.js";import{G as B}from"./index.esm-432ffe67.js";import{b as $}from"./index.esm-aa2d3c7b.js";function q(s){return y({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,88v96a24,24,0,0,1-24,24H64a24,24,0,0,1-24-24V88a8,8,0,0,1,8-8H208A8,8,0,0,1,216,88Z",opacity:"0.2"}},{tag:"path",attr:{d:"M88,48V16a8,8,0,0,1,16,0V48a8,8,0,0,1-16,0Zm40,8a8,8,0,0,0,8-8V16a8,8,0,0,0-16,0V48A8,8,0,0,0,128,56Zm32,0a8,8,0,0,0,8-8V16a8,8,0,0,0-16,0V48A8,8,0,0,0,160,56Zm92.8,46.4L224,124v60a32,32,0,0,1-32,32H64a32,32,0,0,1-32-32V124L3.2,102.4a8,8,0,0,1,9.6-12.8L32,104V88A16,16,0,0,1,48,72H208a16,16,0,0,1,16,16v16l19.2-14.4a8,8,0,0,1,9.6,12.8ZM208,88H48v96a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16Z"}}]})(s)}function I(s){return y({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}}]})(s)}const O=({recipe:s,id:n,onEdit:a,onDelete:l})=>e.jsxs("li",{className:"flex flex-col justify-between items-center shadow-md hover:shadow-xl rounded-md overflow-hidden transition duration-500 ease",children:[e.jsxs(p,{to:`/recipes/${n}`,className:"my-4 contents",children:[e.jsx("img",{loading:"lazy",src:[s[0].imgUrls[0]],alt:"Recipe Image",className:"h-[170px] w-full object-cover hover:scale-110 transition duration-500 ease"}),e.jsxs("div",{className:"flex items-center w-full space-x-4 p-2 border-b ",children:[e.jsx(B,{size:25,className:"text-orange-600"}),e.jsx("p",{className:"text-xl font-semibold text-gray-500",children:[s[0].items[0].title]})]})]}),e.jsxs("div",{className:"flex justify-between items-center w-full mt-4 p-2",children:[a&&e.jsx(I,{size:20,className:"text-blue-700 cursor-pointer",onClick:()=>a(s.id)}),l&&e.jsx($,{size:20,className:"text-red-600 cursor-pointer",onClick:()=>l(s.id)})]})]}),T=()=>{const s=F(),n=D(),[a,l]=i.useState(!1),[c,x]=i.useState(null),[j,b]=i.useState(!0);function w(){l(t=>!t)}function v(t){C(r=>({...r,[t.target.id]:t.target.value}))}const[N,C]=i.useState({name:s.currentUser.displayName,email:s.currentUser.email}),{name:o,email:R}=N;function V(){s.signOut(),n("/")}async function A(){try{if(s.currentUser.displayName!==o){await G(s.currentUser,{displayName:o});const t=f(u,"users",s.currentUser.uid);await L(t,{name:o})}m.success("Profile Details Updated")}catch{m.error("Could not Apply Changes")}}i.useEffect(()=>{async function t(){const r=M(u,"recipes"),d=H(r,S("userRef","==",s.currentUser.uid),P("timestamp","desc")),k=await E(d);let g=[];k.forEach(h=>g.push({id:h.id,data:h.data()})),x(g),b(!1)}t()},[s.currentUser.uid]);async function U(t){if(window.confirm("Are you sure you want to delete this recipe?")){await Z(f(u,"recipes",t));const r=c.filter(d=>d.id!==t);x(r),m.success("Recipe deleted successfully")}}function z(t){n(`/edit-recipe/${t}`)}return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"max-w-6xl mx-auto flex justify-center items-center flex-col",children:[e.jsx("h1",{className:"text-5xl text-green-600 text-center mt-6 font-light tracking-wider",children:"My Profile"}),e.jsxs("div",{className:"w-full md:w-[50%] mt-6 px-3",children:[e.jsxs("form",{children:[e.jsx("input",{type:"text",id:"name",value:o,disabled:!a,onChange:v,className:`mb-6 w-full px-4 py-2 text-xl text-gray-700 bg-white border border-gray-300 rounded transition duration-500 ease-in-out ${a&&"bg-green-200 focus:bg-green-200"}`}),e.jsx("input",{type:"email",id:"email",value:R,disabled:!a,className:"mb-6 w-full px-4 py-2 text-xl text-gray-700 bg-white border border-gray-300 rounded transition duration-500 ease-in-out"}),e.jsxs("div",{className:"flex justify-between whitespace-nowrap text-sm sm:text-lg mb-6",children:[e.jsxs("p",{className:"flex items-center",children:["Do you want to change your name? ",e.jsxs("span",{className:"text-green-600 hover:text-green-700 transition duration-500 ease-in-out ml-1 cursor-pointer",onClick:()=>{a&&A(),w()},children:[" ",a?"Apply Changes":"Edit"]})]}),e.jsx("p",{className:"text-blue-600 hover:text-blue-800 transition duration-500 ease-in-out cursor-pointer",onClick:V,children:"Sign out"})]})]}),e.jsxs(p,{to:"/create-recipe",className:"w-full flex justify-center items-center bg-green-600 text-white uppercase px-7 py-3 text-md font-medium rounded shadow-lg hover:bg-green-700 transition duration-500 ease-in-out hover:shadow-2xl hover:shadow-green-500 active:bg-green-800",children:[e.jsx(q,{size:25,className:"mr-2 text-black"}),e.jsx("button",{type:"submit",className:"",children:"Create Your Recipe"})]})]})]}),e.jsx("div",{className:"max-w-6xl px-3 mt-6 mx-auto",children:!j&&c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl text-center text-gray-600 my-6 font-light",children:"My Recipes"}),e.jsx("ul",{className:"sm:grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 mt-6 mb-6 gap-4",children:c.map(t=>e.jsx(O,{id:t.id,recipe:[t.data],onDelete:()=>U(t.id),onEdit:()=>z(t.id)},t.id))})]})})]})};export{T as default};
